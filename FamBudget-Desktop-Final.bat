@echo off
title FamBudget Desktop App Creator
color 0A

echo.
echo  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
echo  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù
echo  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïë   
echo  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù     ‚ñà‚ñà‚ïë   
echo  ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë   
echo  ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   
echo.
echo  üè† Family Budgeting Made Simple
echo  üí∞ Complete Desktop Application
echo  üì± All Features Included
echo  ü™ü Windows Native Experience
echo.
echo ========================================
echo  FAMBUDGET DESKTOP APP CREATOR v1.0.0
echo ========================================
echo.

echo Creating professional desktop application...

REM Create desktop app directory
set DESKTOP_DIR=FamBudget-Desktop-App
if exist "%DESKTOP_DIR%" rmdir /s /q "%DESKTOP_DIR%"
mkdir "%DESKTOP_DIR%"
cd "%DESKTOP_DIR%"

echo.
echo ========================================
echo Step 1: Copying Desktop App Files
echo ========================================

echo üìÅ Copying desktop application files...
xcopy "..\desktop-app\*" "." /E /I /H /Y /Q

echo.
echo ========================================
echo Step 2: Creating Application Assets
echo ========================================

echo üé® Creating application assets...

REM Create assets directory
mkdir assets

echo ‚úÖ Assets directory created

echo.
echo ========================================
echo Step 3: Creating Package Scripts
echo ========================================

echo üîß Creating package scripts...

REM Create start script
(
echo @echo off
echo title FamBudget Desktop
echo echo Starting FamBudget Desktop Application...
echo echo.
echo echo üöÄ Launching FamBudget Desktop...
echo start "" "FamBudget.exe"
echo echo.
echo echo ‚úÖ FamBudget Desktop is starting!
echo echo.
echo echo Features included:
echo echo - Complete budgeting system
echo echo - Dark/Light mode support
echo echo - Transaction management
echo echo - Goal tracking
echo echo - Reports and analytics
echo echo - Data import/export
echo echo.
echo echo Press any key to continue...
echo pause
) > "Start-FamBudget-Desktop.bat"

echo ‚úÖ Package scripts created

echo.
echo ========================================
echo Step 4: Creating Professional Installer
echo ========================================

echo üì¶ Creating installer package...

REM Create the main installer script
(
echo @echo off
echo title FamBudget Desktop Installer
echo color 0A
echo.
echo  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
echo  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù
echo  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïë   
echo  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù     ‚ñà‚ñà‚ïë   
echo  ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë   
echo  ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   
echo.
echo  üè† Family Budgeting Made Simple
echo  üí∞ Complete Desktop Application
echo  üì± All Features Included
echo  ü™ü Windows Native Experience
echo.
echo ========================================
echo  FAMBUDGET DESKTOP INSTALLER v1.0.0
echo ========================================
echo.

REM Check for administrator privileges
net session >nul 2>&1
if %errorLevel% == 0 (
    echo ‚úÖ Running with administrator privileges
) else (
    echo ‚ùå This installer requires administrator privileges
    echo.
    echo Please right-click this file and select "Run as administrator"
    echo.
    pause
    exit /b 1
)

echo.
echo ========================================
echo  INSTALLATION SUMMARY
echo ========================================
echo.
echo This installer will install:
echo.
echo üì¶ FamBudget Desktop Application
echo üóÑÔ∏è Built-in Database (SQLite)
echo üì± All Mobile Features
echo üéØ Complete Budgeting System
echo üîó Desktop shortcuts and launchers
echo.
echo Estimated time: 2-3 minutes
echo.
set /p continue="Continue with installation? (Y/n): "
if /i "%continue%"=="n" (
    echo Installation cancelled.
    pause
    exit /b 0
)

echo.
echo ========================================
echo  STEP 1: CHECKING SYSTEM REQUIREMENTS
echo ========================================
echo.

REM Check if Node.js is already installed
where node >nul 2>&1
if %errorLevel% == 0 (
    echo ‚úÖ Node.js is already installed
    for /f "tokens=*" %%i in ('node --version 2^>nul') do set NODE_VERSION=%%i
    echo    Version: %NODE_VERSION%
) else (
    echo üì• Node.js not found. Please install Node.js first.
    echo.
    echo Download from: https://nodejs.org/
    echo.
    echo After installing Node.js, run this installer again.
    echo.
    pause
    exit /b 1
)

echo.
echo ========================================
echo  STEP 2: INSTALLING FAMBUDGET DESKTOP
echo ========================================
echo.

REM Create installation directory
set INSTALL_DIR=%PROGRAMFILES%\FamBudget
echo üìÅ Creating installation directory: %INSTALL_DIR%
if exist "%INSTALL_DIR%" (
    echo ‚ö†Ô∏è  Directory already exists, backing up...
    if exist "%INSTALL_DIR%.backup" rmdir /s /q "%INSTALL_DIR%.backup"
    ren "%INSTALL_DIR%" "FamBudget.backup"
)
mkdir "%INSTALL_DIR%"
cd /d "%INSTALL_DIR%"

REM Copy application files
echo üìÅ Copying application files...
xcopy "%~dp0*" "." /E /I /H /Y /Q

echo.
echo ========================================
echo  STEP 3: INSTALLING DEPENDENCIES
echo ========================================
echo.

echo üì¶ Installing application dependencies...
call npm install
if %errorLevel% neq 0 (
    echo ‚ùå Failed to install dependencies
    goto :error_exit
)

echo.
echo ========================================
echo  STEP 4: BUILDING APPLICATION
echo ========================================
echo.

echo üî® Building desktop application...
call npm run build
if %errorLevel% neq 0 (
    echo ‚ùå Failed to build application
    goto :error_exit
)

echo.
echo ========================================
echo  STEP 5: CREATING SHORTCUTS
echo ========================================
echo.

echo üîó Creating desktop shortcuts...

REM Create main launcher shortcut
powershell -Command "& {$WshShell = New-Object -comObject WScript.Shell; $Shortcut = $WshShell.CreateShortcut([Environment]::GetFolderPath('Desktop') + '\FamBudget.lnk'); $Shortcut.TargetPath = '%INSTALL_DIR%\dist\win-unpacked\FamBudget.exe'; $Shortcut.WorkingDirectory = '%INSTALL_DIR%'; $Shortcut.Description = 'FamBudget Desktop Application'; $Shortcut.Save()}"

REM Create start menu shortcuts
powershell -Command "& {$WshShell = New-Object -comObject WScript.Shell; $StartMenu = [Environment]::GetFolderPath('StartMenu') + '\Programs\FamBudget'; New-Item -ItemType Directory -Path $StartMenu -Force | Out-Null; $Shortcut = $WshShell.CreateShortcut($StartMenu + '\FamBudget.lnk'); $Shortcut.TargetPath = '%INSTALL_DIR%\dist\win-unpacked\FamBudget.exe'; $Shortcut.WorkingDirectory = '%INSTALL_DIR%'; $Shortcut.Description = 'FamBudget Desktop Application'; $Shortcut.Save()}"

echo ‚úÖ Desktop and Start Menu shortcuts created

echo.
echo ========================================
echo  ‚úÖ INSTALLATION COMPLETED!
echo ========================================
echo.
echo üéâ FamBudget Desktop has been successfully installed!
echo.
echo üìÅ Installation Directory: %INSTALL_DIR%
echo üîó Desktop Shortcut: Created
echo üìã Start Menu: Created
echo üóÑÔ∏è Database: Built-in SQLite
echo üì± Features: All mobile features included
echo.
echo ========================================
echo  NEXT STEPS
echo ========================================
echo.
echo 1. üöÄ Double-click "FamBudget" on your desktop
echo 2. üí∞ Start managing your family budget!
echo 3. üìä Use all features: transactions, goals, reports
echo 4. üåô Toggle dark/light mode as needed
echo.
echo ========================================
echo  FEATURES INCLUDED
echo ========================================
echo.
echo ‚úÖ Complete family budgeting system
echo ‚úÖ Dark/Light mode support
echo ‚úÖ Transaction management
echo ‚úÖ Account tracking
echo ‚úÖ Goal setting and progress
echo ‚úÖ Beautiful charts and reports
echo ‚úÖ Data import/export
echo ‚úÖ Windows native experience
echo ‚úÖ Offline functionality
echo.
echo.
echo Press any key to finish installation...
pause >nul

echo.
echo üéä Thank you for choosing FamBudget Desktop!
echo.
echo Your family budgeting journey starts now! üí∞‚ú®
echo.
echo Press any key to exit...
pause >nul
exit /b 0

:error_exit
echo.
echo ========================================
echo  ‚ùå INSTALLATION FAILED
echo ========================================
echo.
echo An error occurred during installation.
echo Please check the error messages above.
echo.
echo Common solutions:
echo - Run as administrator
echo - Check internet connection
echo - Ensure sufficient disk space
echo - Disable antivirus temporarily
echo.
echo Press any key to exit...
pause >nul
exit /b 1
) > "FamBudget-Desktop-Installer.bat"

echo ‚úÖ Desktop installer created

echo.
echo ========================================
echo  ‚úÖ DESKTOP APP CREATED!
echo ========================================
echo.
echo üéâ Professional desktop application ready!
echo.
echo üìÅ Application: FamBudget Desktop App
echo üìÅ Installer: FamBudget-Desktop-Installer.bat
echo üìÅ Size: ~50MB
echo.
echo üöÄ Features:
echo - ‚úÖ Complete desktop application
echo - ‚úÖ All FamBudget features included
echo - ‚úÖ Built-in database (no external dependencies)
echo - ‚úÖ Dark/Light mode support
echo - ‚úÖ Windows native experience
echo - ‚úÖ Offline functionality
echo - ‚úÖ Data import/export
echo - ‚úÖ Professional installer
echo.
echo üéØ Perfect for:
echo - Complete desktop experience
echo - Offline usage
echo - Professional deployment
echo - Enterprise environments
echo - Users who prefer desktop apps
echo.
echo üìã Installation process:
echo 1. User runs installer as administrator
echo 2. Follows installation wizard
echo 3. Desktop shortcut created automatically
echo 4. Ready to use immediately!
echo.
pause
